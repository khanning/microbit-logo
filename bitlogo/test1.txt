global [lastz last0 last1 last2 last3 last4]

to ontick
shiftlasts
let [sum last0 + last1 + last2 + last3 + last4]
if :sum > 500 [prf "|%d tilt\n| :sum]
end

to onbuttona
clearlasts
startticker 1
shape 103
end

to clearlasts
setlast0 0
setlast1 0
setlast2 0
setlast3 0
setlast4 0
setlastz accz
end

to shiftlasts
setlast4 last3
setlast3 last2
setlast2 last1
setlast1 last0
setlast0 abs accz - lastz
setlastz accz
end

to onbuttonb
stopticker
clear
end

define abs[n][ifelse :n < 0 [output 0 - :n][output :n]]
